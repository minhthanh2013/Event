--
-- PostgreSQL database dump
--

-- Dumped from database version 13.6 (Debian 13.6-1.pgdg110+1)
-- Dumped by pg_dump version 13.7

-- Started on 2022-06-25 19:33:43

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

SET default_tablespace = '';

SET default_table_access_method = heap;

--
-- TOC entry 200 (class 1259 OID 27875)
-- Name: Admin; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public."Admin" (
    admin_id bigint NOT NULL,
    user_name character varying NOT NULL,
    password character varying NOT NULL,
    email character varying
);


ALTER TABLE public."Admin" OWNER TO postgres;

--
-- TOC entry 220 (class 1259 OID 52552)
-- Name: Admin_admin_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public."Admin" ALTER COLUMN admin_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public."Admin_admin_id_seq"
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 201 (class 1259 OID 27881)
-- Name: Analytic; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public."Analytic" (
    analytic_id bigint NOT NULL,
    conference_id bigint NOT NULL,
    num_ticket_bought bigint NOT NULL,
    num_attende bigint NOT NULL
);


ALTER TABLE public."Analytic" OWNER TO postgres;

--
-- TOC entry 221 (class 1259 OID 52554)
-- Name: Analytic_analytic_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public."Analytic" ALTER COLUMN analytic_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public."Analytic_analytic_id_seq"
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 202 (class 1259 OID 27884)
-- Name: ComboSession; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public."ComboSession" (
    combo_id bigint NOT NULL,
    host_id bigint NOT NULL,
    total_ticket bigint NOT NULL,
    conference_id bigint
);


ALTER TABLE public."ComboSession" OWNER TO postgres;

--
-- TOC entry 222 (class 1259 OID 52556)
-- Name: ComboSession_combo_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public."ComboSession" ALTER COLUMN combo_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public."ComboSession_combo_id_seq"
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 203 (class 1259 OID 27887)
-- Name: Conference; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public."Conference" (
    conference_id bigint NOT NULL,
    conference_name character varying NOT NULL,
    description character varying,
    address character varying,
    date_start_conference timestamp without time zone NOT NULL,
    date_start_sell timestamp without time zone NOT NULL,
    date_end_sell timestamp without time zone NOT NULL,
    date_end_conference timestamp without time zone NOT NULL,
    create_at timestamp without time zone DEFAULT now() NOT NULL,
    update_at timestamp without time zone,
    "isValidated" boolean NOT NULL,
    conference_type bigint,
    conference_category bigint,
    analytic_detail bigint,
    admin_id bigint NOT NULL,
    host_id bigint,
    combo_id bigint,
    speaker_id bigint,
    price bigint
);


ALTER TABLE public."Conference" OWNER TO postgres;

--
-- TOC entry 204 (class 1259 OID 27893)
-- Name: ConferenceCategory; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public."ConferenceCategory" (
    category_id bigint NOT NULL,
    category_name character varying NOT NULL
);


ALTER TABLE public."ConferenceCategory" OWNER TO postgres;

--
-- TOC entry 205 (class 1259 OID 27899)
-- Name: ConferenceCategory_category_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public."ConferenceCategory" ALTER COLUMN category_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public."ConferenceCategory_category_id_seq"
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 206 (class 1259 OID 27901)
-- Name: ConferenceType; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public."ConferenceType" (
    type_id bigint NOT NULL,
    type_name character varying NOT NULL
);


ALTER TABLE public."ConferenceType" OWNER TO postgres;

--
-- TOC entry 207 (class 1259 OID 27907)
-- Name: ConferenceType_type_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public."ConferenceType" ALTER COLUMN type_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public."ConferenceType_type_id_seq"
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 208 (class 1259 OID 27909)
-- Name: Conferences_conference_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public."Conference" ALTER COLUMN conference_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public."Conferences_conference_id_seq"
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 209 (class 1259 OID 27911)
-- Name: Host; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public."Host" (
    host_id bigint NOT NULL,
    user_name character varying NOT NULL,
    password character varying NOT NULL,
    email character varying,
    first_name character varying,
    last_name character varying,
    create_at timestamp without time zone DEFAULT now() NOT NULL,
    update_at timestamp without time zone
);


ALTER TABLE public."Host" OWNER TO postgres;

--
-- TOC entry 210 (class 1259 OID 27917)
-- Name: Host_host_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public."Host" ALTER COLUMN host_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public."Host_host_id_seq"
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 211 (class 1259 OID 27924)
-- Name: Payment; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public."Payment" (
    payment_id bigint NOT NULL,
    payment_name character varying NOT NULL
);


ALTER TABLE public."Payment" OWNER TO postgres;

--
-- TOC entry 223 (class 1259 OID 52558)
-- Name: Payment_payment_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public."Payment" ALTER COLUMN payment_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public."Payment_payment_id_seq"
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 212 (class 1259 OID 27930)
-- Name: Record; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public."Record" (
    record_id bigint NOT NULL,
    record_url character varying NOT NULL,
    conference_id bigint
);


ALTER TABLE public."Record" OWNER TO postgres;

--
-- TOC entry 224 (class 1259 OID 52560)
-- Name: Record_record_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public."Record" ALTER COLUMN record_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public."Record_record_id_seq"
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 213 (class 1259 OID 27936)
-- Name: Speaker; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public."Speaker" (
    user_id bigint NOT NULL,
    conference_id bigint NOT NULL,
    is_accepted boolean,
    date_join timestamp without time zone
);


ALTER TABLE public."Speaker" OWNER TO postgres;

--
-- TOC entry 214 (class 1259 OID 27939)
-- Name: Subscription; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public."Subscription" (
    subscription_id bigint NOT NULL,
    start_date timestamp without time zone NOT NULL,
    duration bigint NOT NULL,
    host_id bigint NOT NULL,
    sub_detail bigint NOT NULL,
    payment_id bigint NOT NULL,
    "hostHostId" bigint,
    "subscriptionPlanPlanId" bigint
);


ALTER TABLE public."Subscription" OWNER TO postgres;

--
-- TOC entry 215 (class 1259 OID 27942)
-- Name: SubscriptionPlan; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public."SubscriptionPlan" (
    plan_id bigint NOT NULL,
    plan_name character varying NOT NULL,
    price_per_month bigint
);


ALTER TABLE public."SubscriptionPlan" OWNER TO postgres;

--
-- TOC entry 226 (class 1259 OID 52566)
-- Name: SubscriptionPlan_plan_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public."SubscriptionPlan" ALTER COLUMN plan_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public."SubscriptionPlan_plan_id_seq"
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 225 (class 1259 OID 52564)
-- Name: Subscription_subscription_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public."Subscription" ALTER COLUMN subscription_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public."Subscription_subscription_id_seq"
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 216 (class 1259 OID 27948)
-- Name: Ticket; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public."Ticket" (
    ticket_id bigint NOT NULL,
    buyer_id bigint NOT NULL,
    conference_id bigint NOT NULL,
    date_buy timestamp without time zone DEFAULT now() NOT NULL,
    payment_id bigint NOT NULL
);


ALTER TABLE public."Ticket" OWNER TO postgres;

--
-- TOC entry 217 (class 1259 OID 27951)
-- Name: Ticket_ticket_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public."Ticket" ALTER COLUMN ticket_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public."Ticket_ticket_id_seq"
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 218 (class 1259 OID 27953)
-- Name: User; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public."User" (
    user_id bigint NOT NULL,
    user_name character varying NOT NULL,
    password character varying NOT NULL,
    email character varying,
    first_name character varying,
    last_name character varying,
    create_at timestamp without time zone DEFAULT now() NOT NULL,
    update_at timestamp without time zone
);


ALTER TABLE public."User" OWNER TO postgres;

--
-- TOC entry 219 (class 1259 OID 27959)
-- Name: User_user_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public."User" ALTER COLUMN user_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public."User_user_id_seq"
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 2943 (class 2606 OID 27962)
-- Name: Admin Admin_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public."Admin"
    ADD CONSTRAINT "Admin_pkey" PRIMARY KEY (admin_id);


--
-- TOC entry 2945 (class 2606 OID 27964)
-- Name: Analytic Analytic_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public."Analytic"
    ADD CONSTRAINT "Analytic_pkey" PRIMARY KEY (analytic_id);


--
-- TOC entry 2947 (class 2606 OID 27966)
-- Name: ComboSession ComboSession_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public."ComboSession"
    ADD CONSTRAINT "ComboSession_pkey" PRIMARY KEY (combo_id);


--
-- TOC entry 2955 (class 2606 OID 27968)
-- Name: ConferenceCategory ConferenceCategory_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public."ConferenceCategory"
    ADD CONSTRAINT "ConferenceCategory_pkey" PRIMARY KEY (category_id);


--
-- TOC entry 2957 (class 2606 OID 27970)
-- Name: ConferenceType ConferenceType_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public."ConferenceType"
    ADD CONSTRAINT "ConferenceType_pkey" PRIMARY KEY (type_id);


--
-- TOC entry 2950 (class 2606 OID 27972)
-- Name: Conference Conferences_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public."Conference"
    ADD CONSTRAINT "Conferences_pkey" PRIMARY KEY (conference_id);


--
-- TOC entry 2959 (class 2606 OID 27974)
-- Name: Host Host_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public."Host"
    ADD CONSTRAINT "Host_pkey" PRIMARY KEY (host_id);


--
-- TOC entry 2961 (class 2606 OID 27978)
-- Name: Payment Payment_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public."Payment"
    ADD CONSTRAINT "Payment_pkey" PRIMARY KEY (payment_id);


--
-- TOC entry 2963 (class 2606 OID 27980)
-- Name: Record Record_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public."Record"
    ADD CONSTRAINT "Record_pkey" PRIMARY KEY (record_id);


--
-- TOC entry 2965 (class 2606 OID 27982)
-- Name: Speaker Speaker_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public."Speaker"
    ADD CONSTRAINT "Speaker_pkey" PRIMARY KEY (user_id, conference_id);


--
-- TOC entry 2969 (class 2606 OID 27984)
-- Name: SubscriptionPlan SubscriptionPlan_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public."SubscriptionPlan"
    ADD CONSTRAINT "SubscriptionPlan_pkey" PRIMARY KEY (plan_id);


--
-- TOC entry 2967 (class 2606 OID 27986)
-- Name: Subscription Subscription_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public."Subscription"
    ADD CONSTRAINT "Subscription_pkey" PRIMARY KEY (subscription_id);


--
-- TOC entry 2971 (class 2606 OID 27988)
-- Name: Ticket Ticket_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public."Ticket"
    ADD CONSTRAINT "Ticket_pkey" PRIMARY KEY (ticket_id);


--
-- TOC entry 2973 (class 2606 OID 27990)
-- Name: User User_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public."User"
    ADD CONSTRAINT "User_pkey" PRIMARY KEY (user_id);


--
-- TOC entry 2951 (class 1259 OID 52467)
-- Name: fki_Conference_combo_id_fkey; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX "fki_Conference_combo_id_fkey" ON public."Conference" USING btree (combo_id);


--
-- TOC entry 2952 (class 1259 OID 52461)
-- Name: fki_Conference_host_id_fkey; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX "fki_Conference_host_id_fkey" ON public."Conference" USING btree (host_id);


--
-- TOC entry 2953 (class 1259 OID 52473)
-- Name: fki_Conference_speaker_id; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX "fki_Conference_speaker_id" ON public."Conference" USING btree (speaker_id);


--
-- TOC entry 2948 (class 1259 OID 52455)
-- Name: fki_Host_host_id; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX "fki_Host_host_id" ON public."ComboSession" USING btree (host_id);


--
-- TOC entry 2974 (class 2606 OID 27991)
-- Name: Analytic Analytic_conference_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public."Analytic"
    ADD CONSTRAINT "Analytic_conference_id_fkey" FOREIGN KEY (conference_id) REFERENCES public."Conference"(conference_id);


--
-- TOC entry 2975 (class 2606 OID 28001)
-- Name: ComboSession ComboSession_host_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public."ComboSession"
    ADD CONSTRAINT "ComboSession_host_id_fkey" FOREIGN KEY (host_id) REFERENCES public."Host"(host_id);


--
-- TOC entry 2976 (class 2606 OID 36066)
-- Name: Conference Conference_admin_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public."Conference"
    ADD CONSTRAINT "Conference_admin_id_fkey" FOREIGN KEY (admin_id) REFERENCES public."Admin"(admin_id);


--
-- TOC entry 2978 (class 2606 OID 52462)
-- Name: Conference Conference_combo_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public."Conference"
    ADD CONSTRAINT "Conference_combo_id_fkey" FOREIGN KEY (combo_id) REFERENCES public."ComboSession"(combo_id) ON DELETE SET NULL NOT VALID;


--
-- TOC entry 2977 (class 2606 OID 52456)
-- Name: Conference Conference_host_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public."Conference"
    ADD CONSTRAINT "Conference_host_id_fkey" FOREIGN KEY (host_id) REFERENCES public."Host"(host_id) ON DELETE SET NULL NOT VALID;


--
-- TOC entry 2979 (class 2606 OID 28016)
-- Name: Record Record_conference_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public."Record"
    ADD CONSTRAINT "Record_conference_id_fkey" FOREIGN KEY (conference_id) REFERENCES public."Conference"(conference_id);


--
-- TOC entry 2982 (class 2606 OID 28021)
-- Name: Subscription Subscription_host_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public."Subscription"
    ADD CONSTRAINT "Subscription_host_id_fkey" FOREIGN KEY (host_id) REFERENCES public."Host"(host_id);


--
-- TOC entry 2983 (class 2606 OID 28026)
-- Name: Subscription Subscription_payment_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public."Subscription"
    ADD CONSTRAINT "Subscription_payment_id_fkey" FOREIGN KEY (payment_id) REFERENCES public."Payment"(payment_id) NOT VALID;


--
-- TOC entry 2984 (class 2606 OID 28031)
-- Name: Subscription Subscription_sub_detail_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public."Subscription"
    ADD CONSTRAINT "Subscription_sub_detail_fkey" FOREIGN KEY (sub_detail) REFERENCES public."SubscriptionPlan"(plan_id) NOT VALID;


--
-- TOC entry 2985 (class 2606 OID 28041)
-- Name: Ticket Ticket_buyer_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public."Ticket"
    ADD CONSTRAINT "Ticket_buyer_id_fkey" FOREIGN KEY (buyer_id) REFERENCES public."User"(user_id);


--
-- TOC entry 2986 (class 2606 OID 28046)
-- Name: Ticket Ticket_conference_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public."Ticket"
    ADD CONSTRAINT "Ticket_conference_id_fkey" FOREIGN KEY (conference_id) REFERENCES public."Conference"(conference_id);


--
-- TOC entry 2987 (class 2606 OID 28051)
-- Name: Ticket Ticket_payment_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public."Ticket"
    ADD CONSTRAINT "Ticket_payment_id_fkey" FOREIGN KEY (payment_id) REFERENCES public."Payment"(payment_id);


--
-- TOC entry 2980 (class 2606 OID 28061)
-- Name: Speaker speaker_to_conference_id; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public."Speaker"
    ADD CONSTRAINT speaker_to_conference_id FOREIGN KEY (conference_id) REFERENCES public."Conference"(conference_id);


--
-- TOC entry 2981 (class 2606 OID 28066)
-- Name: Speaker speaker_to_user_id; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public."Speaker"
    ADD CONSTRAINT speaker_to_user_id FOREIGN KEY (user_id) REFERENCES public."User"(user_id);


-- Completed on 2022-06-25 19:33:43

--
-- PostgreSQL database dump complete
--

